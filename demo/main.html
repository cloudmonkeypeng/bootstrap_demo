<!DOCTYPE html>
<html>
<head>
    <title>Bootstrap Test</title>
    <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/tabdrop.css">
    <link rel="stylesheet" href="../css/dataTables.bootstrap.css">
    <script src="../js/jquery.min.js"></script>
    <script src="../js/jquery.dataTables.js"></script>
    <script src="../js/dataTables.bootstrap.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/bootstrap-tabdrop.js"></script>
    <script src="../js/highcharts.js"></script>
    <script src="../js/jquery.pin.min.js"></script>
    
    <script>

    var tabCount = 2;

    $(function () {

      $('#myTab a:first').tab('show');

      $('.nav-tabs').tabdrop();

      $('#example').dataTable({
        "bLengthChange": false,
        "iDisplayLength":50
      });

      $('#container').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: 'Monthly Average Rainfall'
        },
        subtitle: {
            text: 'Source: WorldClimate.com'
        },
        xAxis: {
            categories: [
                'Jan',
                'Feb',
                'Mar',
                'Apr',
                'May',
                'Jun',
                'Jul',
                'Aug',
                'Sep',
                'Oct',
                'Nov',
                'Dec'
            ]
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Rainfall (mm)'
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
        series: [{
            name: 'Tokyo',
            data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]

        }, {
            name: 'New York',
            data: [83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3]

        }, {
            name: 'London',
            data: [48.9, 38.8, 39.3, 41.4, 47.0, 48.3, 59.0, 59.6, 52.4, 65.2, 59.3, 51.2]

        }, {
            name: 'Berlin',
            data: [42.4, 33.2, 34.5, 39.7, 52.6, 75.5, 57.4, 60.4, 47.6, 39.1, 46.8, 51.1]

        }] 
      });

      registerTabComposeEvent();
      registerTabCloseEvent();
    });

    function registerTabComposeEvent(){

      $(".composeTab").click(function(e){
          //e.preventDefault();  //干嘛用的？
          
          var tabId = "tab" + tabCount; //this is id on tab content div where the 
          tabCount = tabCount + 1; //increment compose count

          $('.nav-tabs').append('<li><a href="#' + tabId + '" data-toggle="tab"> <span class="close closeTab">&times;</span>'+tabId+'</a></li>');
          $('.tab-content').append('<div class="tab-pane" id="' + tabId + '"></div>');

          //新建tab页内容
          craeteNewTabAndLoadUrl("", "./SamplePage.html", "#" + tabId);

          showTab(tabId);
          registerTabCloseEvent();

          $('.nav-tabs').tabdrop('layout');
      });
    }

    function registerTabCloseEvent() {

      $(".closeTab").click(function () {
          //there are multiple elements which has .closeTab icon so close the tab whose close icon is clicked
          var tabContentId = $(this).parent().attr("href");
          $(this).parent().parent().remove(); //remove li of tab
          
          $(tabContentId).remove(); //remove respective tab content

          $('.nav-tabs').tabdrop('layout');

          showTab('graph');
      });
    }

    function showTab(tabId) {
      $('#myTab a[href="#' + tabId + '"]').tab('show');
    }

    function craeteNewTabAndLoadUrl(parms, url, loadDivSelector) {

      $("" + loadDivSelector).load(url, function (response, status, xhr) {
        if (status == "error") {
            var msg = "Sorry but there was an error getting details ! ";
            $("" + loadDivSelector).html(msg + xhr.status + " " + xhr.statusText);
            $("" + loadDivSelector).html("Load Ajax Content Here..."+loadDivSelector);
          }
      });
    }

    </script>

    <style type="text/css" class="init">

    body .modal-admin {
      width: 80%; /* respsonsive width */
    }

    #container{
      width: 75%;
    }

    .nav-tabs > li .close {
      margin: -2px 0 0 10px;
      font-size: 18px;
    }

    </style>
</head>
<body>
  <div class="container">
   
    <div class="row">
      <div class="col-md-2">
        <div class="pinned">
          <div class="btn-group-vertical">
            <button type="button" class="btn btn-default composeTab">增加选项卡1</button> 
            <div class="btn-group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                显示A组按钮
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu">
                <li><a href="#" class="composeTab">增加选项卡2</a></li>
                <li><a href="#" class="composeTab">增加选项卡3</a></li>
              </ul>
            </div>
          </div>

          <br/>
          <br/>
          <div class="btn-group-vertical">
              <button type="button" class="btn btn-default" >
                <span class="glyphicon glyphicon-user"></span> 加入关系图
              </button>
              <button type="button" class="btn btn-default" data-toggle="modal" data-target="#myModal">
                <span class="glyphicon glyphicon-stats"></span> 图表分析
              </button>
          </div>
        </div>
      </div>


      <div class="col-md-10">

        <ul class="nav nav-tabs" id="myTab">
          <li class="">
            <a href="#graph" data-toggle="tab">关系图</a>
          </li>
          <li class="">
            <a href="#tab1" data-toggle="tab">
              <span class="close closeTab">&times;</span>tab1
            </a>
          </li>
        </ul>

        <div class="tab-content">
          <div class="tab-pane" id="graph">
            <br/>
            <p>这里放关系图</p>
          </div>
          <div class="tab-pane" id="tab1">
            <br/>
            <table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Position</th>
                  <th>Office</th>
                  <th>Age</th>
                  <th>Start date</th>
                  <th>Salary</th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>Tiger Nixon</td>
                  <td>System Architect</td>
                  <td>Edinburgh</td>
                  <td>61</td>
                  <td>2011/04/25</td>
                  <td>$3,120</td>
                </tr>
                <tr>
                  <td>Garrett Winters</td>
                  <td>Director</td>
                  <td>Edinburgh</td>
                  <td>63</td>
                  <td>2011/07/25</td>
                  <td>$5,300</td>
                </tr>
                <tr>
                  <td>Ashton Cox</td>
                  <td>Technical Author</td>
                  <td>San Francisco</td>
                  <td>66</td>
                  <td>2009/01/12</td>
                  <td>$4,800</td>
                </tr>
                <tr>
                  <td>Cedric Kelly</td>
                  <td>Javascript Developer</td>
                  <td>Edinburgh</td>
                  <td>22</td>
                  <td>2012/03/29</td>
                  <td>$3,600</td>
                </tr>
                <tr>
                  <td>Jenna Elliott</td>
                  <td>Financial Controller</td>
                  <td>Edinburgh</td>
                  <td>33</td>
                  <td>2008/11/28</td>
                  <td>$5,300</td>
                </tr>
                <tr>
                  <td>Brielle Williamson</td>
                  <td>Integration Specialist</td>
                  <td>New York</td>
                  <td>61</td>
                  <td>2012/12/02</td>
                  <td>$4,525</td>
                </tr>
                <tr>
                  <td>Herrod Chandler</td>
                  <td>Sales Assistant</td>
                  <td>San Francisco</td>
                  <td>59</td>
                  <td>2012/08/06</td>
                  <td>$4,080</td>
                </tr>
                <tr>
                  <td>Rhona Davidson</td>
                  <td>Integration Specialist</td>
                  <td>Edinburgh</td>
                  <td>55</td>
                  <td>2010/10/14</td>
                  <td>$6,730</td>
                </tr>
                <tr>
                  <td>Colleen Hurst</td>
                  <td>Javascript Developer</td>
                  <td>San Francisco</td>
                  <td>39</td>
                  <td>2009/09/15</td>
                  <td>$5,000</td>
                </tr>
                <tr>
                  <td>Sonya Frost</td>
                  <td>Software Engineer</td>
                  <td>Edinburgh</td>
                  <td>23</td>
                  <td>2008/12/13</td>
                  <td>$3,600</td>
                </tr>
                <tr>
                  <td>Jena Gaines</td>
                  <td>System Architect</td>
                  <td>London</td>
                  <td>30</td>
                  <td>2008/12/19</td>
                  <td>$5,000</td>
                </tr>
                <tr>
                  <td>Quinn Flynn</td>
                  <td>Financial Controller</td>
                  <td>Edinburgh</td>
                  <td>22</td>
                  <td>2013/03/03</td>
                  <td>$4,200</td>
                </tr>
                <tr>
                  <td>Charde Marshall</td>
                  <td>Regional Director</td>
                  <td>San Francisco</td>
                  <td>36</td>
                  <td>2008/10/16</td>
                  <td>$5,300</td>
                </tr>
                <tr>
                  <td>Haley Kennedy</td>
                  <td>Senior Marketing Designer</td>
                  <td>London</td>
                  <td>43</td>
                  <td>2012/12/18</td>
                  <td>$4,800</td>
                </tr>
                <tr>
                  <td>Tatyana Fitzpatrick</td>
                  <td>Regional Director</td>
                  <td>London</td>
                  <td>19</td>
                  <td>2010/03/17</td>
                  <td>$2,875</td>
                </tr>
                <tr>
                  <td>Michael Silva</td>
                  <td>Senior Marketing Designer</td>
                  <td>London</td>
                  <td>66</td>
                  <td>2012/11/27</td>
                  <td>$3,750</td>
                </tr>
                <tr>
                  <td>Paul Byrd</td>
                  <td>Javascript Developer</td>
                  <td>New York</td>
                  <td>64</td>
                  <td>2010/06/09</td>
                  <td>$5,000</td>
                </tr>
                <tr>
                  <td>Gloria Little</td>
                  <td>Systems Administrator</td>
                  <td>New York</td>
                  <td>59</td>
                  <td>2009/04/10</td>
                  <td>$3,120</td>
                </tr>
                <tr>
                  <td>Bradley Greer</td>
                  <td>Software Engineer</td>
                  <td>London</td>
                  <td>41</td>
                  <td>2012/10/13</td>
                  <td>$3,120</td>
                </tr>
                <tr>
                  <td>Dai Rios</td>
                  <td>System Architect</td>
                  <td>Edinburgh</td>
                  <td>35</td>
                  <td>2012/09/26</td>
                  <td>$4,200</td>
                </tr>
                <tr>
                  <td>Jenette Caldwell</td>
                  <td>Financial Controller</td>
                  <td>New York</td>
                  <td>30</td>
                  <td>2011/09/03</td>
                  <td>$4,965</td>
                </tr>
                <tr>
                  <td>Yuri Berry</td>
                  <td>System Architect</td>
                  <td>New York</td>
                  <td>40</td>
                  <td>2009/06/25</td>
                  <td>$3,600</td>
                </tr>
                <tr>
                  <td>Caesar Vance</td>
                  <td>Technical Author</td>
                  <td>New York</td>
                  <td>21</td>
                  <td>2011/12/12</td>
                  <td>$4,965</td>
                </tr>
                <tr>
                  <td>Doris Wilder</td>
                  <td>Sales Assistant</td>
                  <td>Edinburgh</td>
                  <td>23</td>
                  <td>2010/09/20</td>
                  <td>$4,965</td>
                </tr>
                <tr>
                  <td>Angelica Ramos</td>
                  <td>System Architect</td>
                  <td>London</td>
                  <td>36</td>
                  <td>2009/10/09</td>
                  <td>$2,875</td>
                </tr>
                <tr>
                  <td>Gavin Joyce</td>
                  <td>Developer</td>
                  <td>Edinburgh</td>
                  <td>42</td>
                  <td>2010/12/22</td>
                  <td>$4,525</td>
                </tr>
                <tr>
                  <td>Jennifer Chang</td>
                  <td>Regional Director</td>
                  <td>London</td>
                  <td>28</td>
                  <td>2010/11/14</td>
                  <td>$4,080</td>
                </tr>
                <tr>
                  <td>Brenden Wagner</td>
                  <td>Software Engineer</td>
                  <td>San Francisco</td>
                  <td>18</td>
                  <td>2011/06/07</td>
                  <td>$3,750</td>
                </tr>
                <tr>
                  <td>Ebony Grimes</td>
                  <td>Software Engineer</td>
                  <td>San Francisco</td>
                  <td>48</td>
                  <td>2010/03/11</td>
                  <td>$2,875</td>
                </tr>
                <tr>
                  <td>Russell Chavez</td>
                  <td>Director</td>
                  <td>Edinburgh</td>
                  <td>20</td>
                  <td>2011/08/14</td>
                  <td>$3,600</td>
                </tr>
                <tr>
                  <td>Michelle House</td>
                  <td>Integration Specialist</td>
                  <td>Edinburgh</td>
                  <td>37</td>
                  <td>2011/06/02</td>
                  <td>$3,750</td>
                </tr>
                <tr>
                  <td>Suki Burks</td>
                  <td>Developer</td>
                  <td>London</td>
                  <td>53</td>
                  <td>2009/10/22</td>
                  <td>$2,875</td>
                </tr>
                <tr>
                  <td>Prescott Bartlett</td>
                  <td>Technical Author</td>
                  <td>London</td>
                  <td>27</td>
                  <td>2011/05/07</td>
                  <td>$6,730</td>
                </tr>
                <tr>
                  <td>Gavin Cortez</td>
                  <td>Technical Author</td>
                  <td>San Francisco</td>
                  <td>22</td>
                  <td>2008/10/26</td>
                  <td>$6,730</td>
                </tr>
                <tr>
                  <td>Martena Mccray</td>
                  <td>Integration Specialist</td>
                  <td>Edinburgh</td>
                  <td>46</td>
                  <td>2011/03/09</td>
                  <td>$4,080</td>
                </tr>
                <tr>
                  <td>Unity Butler</td>
                  <td>Senior Marketing Designer</td>
                  <td>San Francisco</td>
                  <td>47</td>
                  <td>2009/12/09</td>
                  <td>$3,750</td>
                </tr>
                <tr>
                  <td>Howard Hatfield</td>
                  <td>Financial Controller</td>
                  <td>San Francisco</td>
                  <td>51</td>
                  <td>2008/12/16</td>
                  <td>$4,080</td>
                </tr>
                <tr>
                  <td>Hope Fuentes</td>
                  <td>Financial Controller</td>
                  <td>San Francisco</td>
                  <td>41</td>
                  <td>2010/02/12</td>
                  <td>$4,200</td>
                </tr>
                <tr>
                  <td>Vivian Harrell</td>
                  <td>System Architect</td>
                  <td>San Francisco</td>
                  <td>62</td>
                  <td>2009/02/14</td>
                  <td>$4,965</td>
                </tr>
                <tr>
                  <td>Timothy Mooney</td>
                  <td>Financial Controller</td>
                  <td>London</td>
                  <td>37</td>
                  <td>2008/12/11</td>
                  <td>$4,200</td>
                </tr>
                <tr>
                  <td>Jackson Bradshaw</td>
                  <td>Director</td>
                  <td>New York</td>
                  <td>65</td>
                  <td>2008/09/26</td>
                  <td>$5,000</td>
                </tr>
                <tr>
                  <td>Miriam Weiss</td>
                  <td>Support Engineer</td>
                  <td>Edinburgh</td>
                  <td>64</td>
                  <td>2011/02/03</td>
                  <td>$4,965</td>
                </tr>
                <tr>
                  <td>Bruno Nash</td>
                  <td>Software Engineer</td>
                  <td>London</td>
                  <td>38</td>
                  <td>2011/05/03</td>
                  <td>$4,200</td>
                </tr>
                <tr>
                  <td>Odessa Jackson</td>
                  <td>Support Engineer</td>
                  <td>Edinburgh</td>
                  <td>37</td>
                  <td>2009/08/19</td>
                  <td>$3,600</td>
                </tr>
                <tr>
                  <td>Thor Walton</td>
                  <td>Developer</td>
                  <td>New York</td>
                  <td>61</td>
                  <td>2013/08/11</td>
                  <td>$3,600</td>
                </tr>
                <tr>
                  <td>Finn Camacho</td>
                  <td>Support Engineer</td>
                  <td>San Francisco</td>
                  <td>47</td>
                  <td>2009/07/07</td>
                  <td>$4,800</td>
                </tr>
                <tr>
                  <td>Elton Baldwin</td>
                  <td>Data Coordinator</td>
                  <td>Edinburgh</td>
                  <td>64</td>
                  <td>2012/04/09</td>
                  <td>$6,730</td>
                </tr>
                <tr>
                  <td>Zenaida Frank</td>
                  <td>Software Engineer</td>
                  <td>New York</td>
                  <td>63</td>
                  <td>2010/01/04</td>
                  <td>$4,800</td>
                </tr>
                <tr>
                  <td>Zorita Serrano</td>
                  <td>Software Engineer</td>
                  <td>San Francisco</td>
                  <td>56</td>
                  <td>2012/06/01</td>
                  <td>$5,300</td>
                </tr>
                <tr>
                  <td>Jennifer Acosta</td>
                  <td>Javascript Developer</td>
                  <td>Edinburgh</td>
                  <td>43</td>
                  <td>2013/02/01</td>
                  <td>$2,875</td>
                </tr>
                <tr>
                  <td>Cara Stevens</td>
                  <td>Sales Assistant</td>
                  <td>New York</td>
                  <td>46</td>
                  <td>2011/12/06</td>
                  <td>$4,800</td>
                </tr>
                <tr>
                  <td>Hermione Butler</td>
                  <td>Director</td>
                  <td>London</td>
                  <td>47</td>
                  <td>2011/03/21</td>
                  <td>$4,080</td>
                </tr>
                <tr>
                  <td>Lael Greer</td>
                  <td>Systems Administrator</td>
                  <td>London</td>
                  <td>21</td>
                  <td>2009/02/27</td>
                  <td>$3,120</td>
                </tr>
                <tr>
                  <td>Jonas Alexander</td>
                  <td>Developer</td>
                  <td>San Francisco</td>
                  <td>30</td>
                  <td>2010/07/14</td>
                  <td>$5,300</td>
                </tr>
                <tr>
                  <td>Shad Decker</td>
                  <td>Regional Director</td>
                  <td>Edinburgh</td>
                  <td>51</td>
                  <td>2008/11/13</td>
                  <td>$5,300</td>
                </tr>
                <tr>
                  <td>Michael Bruce</td>
                  <td>Javascript Developer</td>
                  <td>Edinburgh</td>
                  <td>29</td>
                  <td>2011/06/27</td>
                  <td>$4,080</td>
                </tr>
                <tr>
                  <td>Donna Snider</td>
                  <td>System Architect</td>
                  <td>New York</td>
                  <td>27</td>
                  <td>2011/01/25</td>
                  <td>$3,120</td>
                </tr>
              </tbody>
            </table>  
          </div>
        </div>  

      </div>

    </div>
  </div>


  <script>
    $(".pinned").pin({containerSelector: ".container", minWidth: 940});

    $('#myModal').modal();
  </script>

  <!-- Modal -->
  <div class="modal fade" id="myModal">
    <div class="modal-dialog modal-admin">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title" id="myModalLabel">Highchart 实例</h4>
        </div>
        <div class="modal-body">
          <div id="container"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

</body>
</html>
